# CineMatch - Raw Data Directory

This directory contains raw data files for the CineMatch ML recommender.

## ğŸ“ Directory Structure

```
raw/
â”œâ”€â”€ ml-32m/          # MovieLens 32M dataset
â”‚   â”œâ”€â”€ movies.csv   # ~836 MB - Movie metadata
â”‚   â”œâ”€â”€ ratings.csv  # ~836 MB - User ratings
â”‚   â”œâ”€â”€ tags.csv     # ~69 MB - User tags
â”‚   â”œâ”€â”€ links.csv    # ~2 MB - Links to TMDb and IMDb
â”‚   â””â”€â”€ ...
â””â”€â”€ tmdb/            # TMDb metadata (fetched via API)
    â””â”€â”€ tmdb_metadata.csv
```

## âš ï¸ These Files Are NOT in Git

The files in this directory are **excluded from Git** due to their large size:
- `ratings.csv` is 836 MB (exceeds GitHub's 100 MB limit)
- `tags.csv` is 69 MB (exceeds recommended 50 MB)
- Other large CSV files

They are listed in `.gitignore` to prevent accidental commits.

## ğŸ“¥ How to Download the MovieLens 32M Dataset

If you're setting up this project on a new machine, you need to download the dataset:

### Option 1: Download Directly
1. Visit https://grouplens.org/datasets/movielens/32m/
2. Download `ml-32m.zip`
3. Extract it
4. Copy the CSV files to `backend/raw/ml-32m/`

### Option 2: Use wget (Linux/Mac)
```bash
cd backend/raw/
wget https://files.grouplens.org/datasets/movielens/ml-32m.zip
unzip ml-32m.zip
mv ml-32m/* ml-32m/
rm ml-32m.zip
```

### Option 3: Use curl (Mac)
```bash
cd backend/raw/
curl -O https://files.grouplens.org/datasets/movielens/ml-32m.zip
unzip ml-32m.zip
mv ml-32m/* ml-32m/
rm ml-32m.zip
```

## ğŸ”„ After Downloading

Once you have the MovieLens data, run the data pipeline:

```bash
cd backend

# 1. Set up TMDb API key (optional, for enhanced metadata)
echo "TMDB_BEARER_TOKEN=your_token_here" > .env

# 2. Run the interactive setup
python setup_pipeline.py

# Or run steps manually:
# python scripts/fetch_tmdb_metadata.py  # Optional
# python -m ml.preprocess_catalog
# python -m ml.train_model
```

This will:
1. Optionally fetch TMDb metadata
2. Merge MovieLens + TMDb data
3. Train the ML model
4. Generate artifacts in `ml/artifacts/`

## ğŸ“Š Expected Files After Setup

```
raw/
â”œâ”€â”€ ml-32m/
â”‚   â”œâ”€â”€ movies.csv        (required)
â”‚   â”œâ”€â”€ links.csv         (required)
â”‚   â”œâ”€â”€ ratings.csv       (optional, not used by recommender)
â”‚   â”œâ”€â”€ tags.csv          (optional, not used by recommender)
â”‚   â””â”€â”€ README.txt
â””â”€â”€ tmdb/
    â””â”€â”€ tmdb_metadata.csv (optional, generated by fetch_tmdb_metadata.py)
```

## â„¹ï¸ Notes

- The recommender only needs `movies.csv` and `links.csv`
- `ratings.csv` and `tags.csv` contain user data (not needed for content-based filtering)
- TMDb metadata is optional but enhances movie descriptions

## ğŸ†˜ Troubleshooting

### "FileNotFoundError: movies.csv"
Download the MovieLens dataset (see above)

### "Dataset too large"
The full dataset has 58,000+ movies. If you need a smaller version:
- Use MovieLens Latest-Small (100K ratings) instead
- Or manually filter `movies.csv` to fewer rows

### "Out of memory during training"
Reduce the dataset size or increase available RAM

---

**For more information, see:**
- `backend/DATA_PIPELINE.md` - Complete data pipeline documentation
- `backend/QUICK_REFERENCE.md` - Common commands
